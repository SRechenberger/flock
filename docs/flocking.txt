-- Hoogle documentation, generated by Haddock
-- See Hoogle, http://www.haskell.org/hoogle/


@package flocking
@version 0.1.0.0

module Flock
type Behavior a = ReaderT Plane (StateT Agent (Rand StdGen)) a
runBehavior :: Behavior a -> StdGen -> Plane -> Agent -> (a, Agent, StdGen)
data Sensor
Sensor :: Distance -> Angle -> Distance -> Distance -> Sensor
[_sensorRange] :: Sensor -> Distance
[_sensorRayAngle] :: Sensor -> Angle
[_sensorRaySect] :: Sensor -> Distance
[_sensorPointRadius] :: Sensor -> Distance

-- | Constructs a sensor config
mkSensor :: Int -> Int -> Float -> Float -> Sensor
sensorRange :: Lens' Sensor Distance
sensorRayAngle :: Lens' Sensor Angle
sensorRaySect :: Lens' Sensor Distance
sensorPointRadius :: Lens' Sensor Distance

-- | Agents are circular autonomous mobile objects, searching of there
--   destination.
data Agent
Agent :: Point -> Float -> Vector -> Float -> Sensor -> Bool -> Bool -> Agent

-- | Position of the agent on the plane
[_agentPosition] :: Agent -> Point

-- | Radius of the agent
[_agentRadius] :: Agent -> Float

-- | Direction, in which the agent is heading
[_agentDirection] :: Agent -> Vector

-- | Speed at which the agent is moving
[_agentSpeed] :: Agent -> Float

-- | Sensor range of the agent
[_agentSensor] :: Agent -> Sensor

-- | Is the agent in a flock?
[_agentFlocking] :: Agent -> Bool

-- | Is the agent or its flock at its destination?
[_agentAtDest] :: Agent -> Bool

-- | Constructs an agent
mkAgent :: Point -> Float -> Vector -> Float -> Sensor -> Agent

-- | Moves an agent, according to its state
move :: Behavior ()

-- | Scans the plane around an agent, returning all agents and obstacles
--   withing it's sensor range
scan :: Behavior ([Agent], [Obstacle])

-- | Turns an agent by an angle
turn :: Angle -> Behavior ()

-- | Lets the agent directly head to a specific point.
turnTowards :: Point -> Behavior ()
agentPosition :: Lens' Agent Point
agentRadius :: Lens' Agent Float
agentDirection :: Lens' Agent Vector
agentSpeed :: Lens' Agent Float
agentSensor :: Lens' Agent Sensor
agentFlocking :: Lens' Agent Bool
agentAtDest :: Lens' Agent Bool

-- | Obstacles are circular objects, which can not be passed by any agent.
data Obstacle
Obstacle :: Point -> Float -> Obstacle

-- | The position of the obstacle on the plane
[_obstPosition] :: Obstacle -> Point

-- | The radius of the obstacle
[_obstRadius] :: Obstacle -> Float
obstRadius :: Lens' Obstacle Float
obstPosition :: Lens' Obstacle Point
data Plane
Plane :: [Agent] -> [Obstacle] -> Plane
[_planeAgents] :: Plane -> [Agent]
[_planeObstacles] :: Plane -> [Obstacle]

-- | Simulates the plane by one step according to a function, which defines
--   the behavior of an agent in the plane.
step :: (Plane -> Agent -> Agent) -> Plane -> Plane

-- | As step, but in a random monad.
stepR :: (Plane -> Agent -> Rand g Agent) -> Plane -> Rand g Plane
planeObstacles :: Lens' Plane [Obstacle]
planeAgents :: Lens' Plane [Agent]
type Angle = Float
type Distance = Float
class Render a
render :: Render a => Plane -> a -> Picture
instance Flock.Render Flock.Agent
instance Flock.Render Flock.Obstacle
instance Flock.Render Flock.Plane
instance GHC.Classes.Eq Flock.Plane
instance GHC.Show.Show Flock.Plane
instance GHC.Classes.Eq Flock.Obstacle
instance GHC.Show.Show Flock.Obstacle
instance GHC.Classes.Eq Flock.Agent
instance GHC.Show.Show Flock.Agent
instance GHC.Classes.Eq Flock.Sensor
instance GHC.Show.Show Flock.Sensor

module Simulation

-- | Runs the simulation in a window, given the window size, a plane, to
--   simulate and a behavior function.
runSim :: Int -> Int -> Plane -> Behavior () -> IO ()
instance GHC.Show.Show Simulation.SimState
